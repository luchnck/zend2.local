<?php
$title = 'Get information about cable';
//$this->headTitle($title);
//$this->headMeta()->setCharset('UTF-8');
?>
<h1><? echo $this->escapeHtml($title);?></h1>
<?
$form = $this->form;
$form->setAttribute('action', $this->url('barcervice', array('action' => 'index')));
$form->prepare();

if ($this->messages)
	foreach ($this->messages as $key => $message)
	{echo '<div>'.$key.' - ';
	var_dump($message); echo '</div>';}
$CabFieldset = $form->getElements();
echo $this->form()->openTag($form);
echo '<table class="form cable display"><tbody>';
foreach ($CabFieldset as $key => $value)
	{
		echo 
		'<tr><td>'.$value->getLabel().'</td>
		 <td>'.$this->formElement($value).'</td></tr>';
	}
echo '</tbody></table>';
echo $this->form()->closeTag();

//Вывод результатов рассчета
if (!empty($this->dimensions)){
	echo '<hr>';
	echo '<h2>Parameters of cable</h2>';
		foreach ($this->dimensions as $key => $value)
			if (!is_array($value))
				echo '<div>'.$key.' = '.$value.'</div>';
	echo '<hr>';
	if ($form->has('byAllBarTypes'))
		if (($form->get('byAllBarTypes')->getValue()) == 'Yes')
			// Если включен множественный выбор типа барабана
			//строим таблицу результатов
			{
				echo '<h2>Table of spool parameters</h2><table class="table spool display"><tbody><tr>';
				foreach ($headers as $key => $value)
					echo '<th>'.$value.'</th>';
				echo '</tr><tr>';
				foreach ($this->dimensions as $key => $values){
					if (is_array($values)){
						echo '<td>'.$key.'</td>';
						foreach ($values as $key => $value)
							echo '<td>'.$value.'</td>';
						echo '</tr>';	
					}
				}
				echo '</tbody></table>';
			}	
}
